{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\HP\\\\Desktop\\\\dashboard redux\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\HP\\\\Desktop\\\\dashboard redux\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\HP\\\\Desktop\\\\dashboard redux\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\HP\\\\Desktop\\\\dashboard redux\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import L from\"leaflet\";import{fetchAllBuildings,fetchBuildingAssets,setAssetDetail,fetchAssetDevicesCount}from\"../store/actions\";import filter from\"../img/filter.svg\";import{Map,TileLayer,Marker,Popup}from\"react-leaflet\";import persianJs from\"persianjs\";import{Link}from\"react-router-dom\";import low from\"../img/low.svg\";import high from\"../img/high.svg\";import building from\"../img/building.svg\";var waterIcon=L.icon({iconUrl:require(\"../img/water.svg\"),iconRetinaUrl:require(\"../img/water.svg\"),iconSize:[60,70],iconAnchor:[12.3,41],popupAnchor:[11,-28]});var gasIcon=L.icon({iconUrl:require(\"../img/gas.svg\"),iconRetinaUrl:require(\"../img/gas.svg\"),iconSize:[60,70],iconAnchor:[12.3,41],popupAnchor:[11,-28]});var electricityICon=L.icon({iconUrl:require(\"../img/elec.svg\"),iconRetinaUrl:require(\"../img/elec.svg\"),iconSize:[60,70],iconAnchor:[12.3,41],popupAnchor:[11,-28]});var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(props){var _this;_classCallCheck(this,Home);_this=_super.call(this,props);_this._isMounted=false;_this.getIcon=function(){if(_this.state.type===\"electricity\"){return electricityICon;}if(_this.state.type===\"water\"){return waterIcon;}if(_this.state.type===\"gas\"){return gasIcon;}};_this.persionConvertor=function(data){var persian=persianJs(\"\".concat(data)).englishNumber()._str;return persian;};_this.renderMarker=function(){return _this.props.assets.map(function(item,index){var position=[item.latitude,item.longitude];return/*#__PURE__*/React.createElement(Marker,{position:position,icon:_this.getIcon(),key:index},/*#__PURE__*/React.createElement(Popup,null,/*#__PURE__*/React.createElement(\"div\",{className:\"pop-title\"},/*#__PURE__*/React.createElement(\"span\",null,item.name),/*#__PURE__*/React.createElement(\"img\",{src:building,width:\"30px\",alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"info-pop\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"span\",{className:\"info-name\"},\"\\u0646\\u0627\\u0645 \\u0645\\u0627\\u0644\\u06A9:\"),/*#__PURE__*/React.createElement(\"span\",{className:\"info-num\"},item.name)),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"span\",{className:\"info-name\"},\"\\u0646\\u0648\\u0639 \\u06A9\\u0646\\u062A\\u0648\\u0631:\"),/*#__PURE__*/React.createElement(\"span\",{className:\"info-num\"},_this.getType())),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"span\",{className:\"info-name\"},\"\\u062A\\u0639\\u062F\\u0627\\u062F \\u06A9\\u0646\\u062A\\u0648\\u0631:\"),/*#__PURE__*/React.createElement(\"span\",{className:\"info-num\"},_this.persionConvertor(_this.props.DevicesCount))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"span\",{className:\"info-name\"},\"\\u0633\\u06CC\\u06AF\\u0646\\u0627\\u0644:\"),/*#__PURE__*/React.createElement(\"img\",{alt:\"\",className:\"info-num\",width:\"20px\",src:_this.state.type===\"water\"?low:high})),/*#__PURE__*/React.createElement(Link,{onClick:function onClick(){return _this.setDetail(item);},className:\"btn pop-btn\",to:\"/Home/\".concat(item.name)},\"\\u0644\\u06CC\\u0633\\u062A \\u06A9\\u0646\\u062A\\u0648\\u0631 \\u0647\\u0627\"))));});};_this.getType=function(){var type=_this.state.type;if(type===\"electricity\"){return\"برق\";}if(type===\"water\"){return\"آب\";}if(type===\"gas\"){return\"گاز\";}};_this.setDetail=function(item){_this.props.setAssetDetail({assetId:item.uuid,type:_this.state.type});};_this.onChangeValue=function(event){_this.setState({type:event.target.value});_this.props.fetchAssetDevicesCount({type:_this.state.type});};_this.state={lng:53.982,lat:26.5425,zoom:13,type:\"electricity\"};return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){this._isMounted=true;if(this._isMounted){this.props.fetchAllBuildings();this.props.fetchBuildingAssets(this.props.uuid);this.props.fetchAssetDevicesCount({type:this.state.type});}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._isMounted=false;}},{key:\"render\",value:function render(){var position=[this.state.lat,this.state.lng];return/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-10 p-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"selector\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},/*#__PURE__*/React.createElement(\"img\",{src:filter,alt:\"\",width:\"20px\"}),/*#__PURE__*/React.createElement(\"span\",null,\"\\u0641\\u06CC\\u0644\\u062A\\u0631 \\u0647\\u0627\")),/*#__PURE__*/React.createElement(\"div\",{onChange:this.onChangeValue},/*#__PURE__*/React.createElement(\"label\",{className:\"radio-box\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-2\",type:\"radio\",value:\"electricity\",name:\"type\",defaultChecked:true}),\"\\u06A9\\u0646\\u062A\\u0648\\u0631 \\u0628\\u0631\\u0642\"),/*#__PURE__*/React.createElement(\"label\",{className:\"radio-box\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-2\",type:\"radio\",value:\"water\",name:\"type\"}),\"\\u06A9\\u0646\\u062A\\u0648\\u0631 \\u0622\\u0628\"),/*#__PURE__*/React.createElement(\"label\",{className:\"radio-box\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-2\",type:\"radio\",value:\"gas\",name:\"type\"}),\"\\u06A9\\u0646\\u062A\\u0648\\u0631 \\u06AF\\u0627\\u0632\"))),/*#__PURE__*/React.createElement(Map,{center:position,zoom:this.state.zoom,className:\"h-100\"},/*#__PURE__*/React.createElement(TileLayer,{attribution:\"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),this.renderMarker()));}}]);return Home;}(Component);var mapStateToProps=function mapStateToProps(_ref){var AllBuildingsReducer=_ref.AllBuildingsReducer,BuildingAssetsReducer=_ref.BuildingAssetsReducer,AssetDevicesCountReducer=_ref.AssetDevicesCountReducer;return{uuid:AllBuildingsReducer.data[0].uuid,assets:BuildingAssetsReducer.data,DevicesCount:AssetDevicesCountReducer.data.length};};export default connect(mapStateToProps,{fetchBuildingAssets:fetchBuildingAssets,fetchAllBuildings:fetchAllBuildings,setAssetDetail:setAssetDetail,fetchAssetDevicesCount:fetchAssetDevicesCount})(Home);","map":{"version":3,"sources":["C:/Users/HP/Desktop/dashboard redux/dashboard/src/Pages/Home.jsx"],"names":["React","Component","connect","L","fetchAllBuildings","fetchBuildingAssets","setAssetDetail","fetchAssetDevicesCount","Map","TileLayer","Marker","Popup","persianJs","Link","waterIcon","icon","iconUrl","require","iconRetinaUrl","iconSize","iconAnchor","popupAnchor","gasIcon","electricityICon","Home","props","_isMounted","getIcon","state","type","persionConvertor","data","persian","englishNumber","_str","renderMarker","assets","map","item","index","position","latitude","longitude","name","building","getType","DevicesCount","low","high","setDetail","assetId","uuid","onChangeValue","event","setState","target","value","lng","lat","zoom","filter","mapStateToProps","AllBuildingsReducer","BuildingAssetsReducer","AssetDevicesCountReducer","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport L from \"leaflet\";\r\nimport {\r\n  fetchAllBuildings,\r\n  fetchBuildingAssets,\r\n  setAssetDetail,\r\n  fetchAssetDevicesCount\r\n\r\n} from \"../store/actions\";\r\nimport filter from \"../img/filter.svg\";\r\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\";\r\nimport persianJs from \"persianjs\";\r\nimport { Link } from \"react-router-dom\";\r\nimport low from \"../img/low.svg\";\r\nimport high from \"../img/high.svg\";\r\nimport building from \"../img/building.svg\";\r\n\r\nvar waterIcon = L.icon({\r\n  iconUrl: require(\"../img/water.svg\"),\r\n  iconRetinaUrl: require(\"../img/water.svg\"),\r\n  iconSize: [60, 70],\r\n  iconAnchor: [12.3, 41],\r\n  popupAnchor: [11, -28],\r\n});\r\nvar gasIcon = L.icon({\r\n  iconUrl: require(\"../img/gas.svg\"),\r\n  iconRetinaUrl: require(\"../img/gas.svg\"),\r\n  iconSize: [60, 70],\r\n  iconAnchor: [12.3, 41],\r\n  popupAnchor: [11, -28],\r\n});\r\nvar electricityICon = L.icon({\r\n  iconUrl: require(\"../img/elec.svg\"),\r\n  iconRetinaUrl: require(\"../img/elec.svg\"),\r\n  iconSize: [60, 70],\r\n  iconAnchor: [12.3, 41],\r\n  popupAnchor: [11, -28],\r\n});\r\n\r\nclass Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      lng: 53.982,\r\n      lat: 26.5425,\r\n      zoom: 13,\r\n      type: \"electricity\",\r\n    };\r\n  }\r\n  _isMounted = false;\r\n\r\n  componentDidMount() {\r\n    this._isMounted = true;\r\n    if (this._isMounted) {\r\n      this.props.fetchAllBuildings();\r\n      this.props.fetchBuildingAssets(this.props.uuid);\r\n\r\n      this.props.fetchAssetDevicesCount({ type: this.state.type });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n  getIcon = () => {\r\n    if (this.state.type === \"electricity\") {\r\n      return electricityICon;\r\n    }\r\n    if (this.state.type === \"water\") {\r\n      return waterIcon;\r\n    }\r\n    if (this.state.type === \"gas\") {\r\n      return gasIcon;\r\n    }\r\n  };\r\n  persionConvertor = (data) => {\r\n    const persian = persianJs(`${data}`).englishNumber()._str;\r\n    return persian;\r\n  };\r\n  renderMarker = () => {\r\n    return this.props.assets.map((item, index) => {\r\n      const position = [item.latitude, item.longitude];\r\n      return (\r\n        <Marker position={position} icon={this.getIcon()} key={index}>\r\n          <Popup>\r\n            <div className=\"pop-title\">\r\n              <span>{item.name}</span>\r\n              <img src={building} width=\"30px\" alt=\"\" />\r\n            </div>\r\n\r\n            <div className=\"info-pop\">\r\n              <div className=\"d-flex justify-content-between\">\r\n                <span className=\"info-name\">نام مالک:</span>\r\n                <span className=\"info-num\">{item.name}</span>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between\">\r\n                <span className=\"info-name\">نوع کنتور:</span>\r\n                <span className=\"info-num\">{this.getType()}</span>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between\">\r\n                <span className=\"info-name\">تعداد کنتور:</span>\r\n                <span className=\"info-num\">\r\n                  {this.persionConvertor(this.props.DevicesCount)}\r\n\r\n                </span>\r\n              </div>\r\n\r\n              <div className=\"d-flex justify-content-between\">\r\n                <span className=\"info-name\">سیگنال:</span>\r\n                <img\r\n                  alt=\"\"\r\n                  className=\"info-num\"\r\n                  width=\"20px\"\r\n                  src={this.state.type  === \"water\" ? low : high}\r\n                />\r\n              </div>\r\n\r\n              <Link\r\n                onClick={() => this.setDetail(item)}\r\n                className=\"btn pop-btn\"\r\n                to={`/Home/${item.name}`}\r\n              >\r\n                لیست کنتور ها\r\n              </Link>\r\n            </div>\r\n          </Popup>\r\n        </Marker>\r\n      );\r\n    });\r\n  };\r\n  getType = () => {\r\n    const { type } = this.state;\r\n    if (type === \"electricity\") {\r\n      return \"برق\";\r\n    }\r\n    if (type === \"water\") {\r\n      return \"آب\";\r\n    }\r\n    if (type === \"gas\") {\r\n      return \"گاز\";\r\n    }\r\n  };\r\n  setDetail = (item) => {\r\n    this.props.setAssetDetail({\r\n      assetId: item.uuid,\r\n      type: this.state.type,\r\n    });\r\n  };\r\n  onChangeValue = (event) => {\r\n    this.setState({ type: event.target.value });\r\n    this.props.fetchAssetDevicesCount({ type: this.state.type });\r\n\r\n  };\r\n\r\n  render() {\r\n    const position = [this.state.lat, this.state.lng];\r\n    return (\r\n      <div className=\"col-lg-10 p-0\">\r\n        <div className=\"selector\">\r\n          <div className=\"title\">\r\n            <img src={filter} alt=\"\" width=\"20px\" />\r\n            <span>فیلتر ها</span>\r\n          </div>\r\n          <div onChange={this.onChangeValue}>\r\n            <label className=\"radio-box\">\r\n              <input\r\n                className=\"mr-2\"\r\n                type=\"radio\"\r\n                value=\"electricity\"\r\n                name=\"type\"\r\n                defaultChecked\r\n              />\r\n              کنتور برق\r\n            </label>\r\n            <label className=\"radio-box\">\r\n              <input\r\n                className=\"mr-2\"\r\n                type=\"radio\"\r\n                value=\"water\"\r\n                name=\"type\"\r\n              />\r\n              کنتور آب\r\n            </label>\r\n            <label className=\"radio-box\">\r\n              <input\r\n                className=\"mr-2\"\r\n                type=\"radio\"\r\n                value=\"gas\"\r\n                name=\"type\"\r\n              />\r\n              کنتور گاز\r\n            </label>\r\n          </div>\r\n        </div>\r\n        <Map center={position} zoom={this.state.zoom} className=\"h-100\">\r\n          <TileLayer\r\n            attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          />\r\n          {this.renderMarker()}\r\n        </Map>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({\r\n  AllBuildingsReducer,\r\n  BuildingAssetsReducer,\r\n  AssetDevicesCountReducer\r\n\r\n}) => {\r\n  return {\r\n    uuid: AllBuildingsReducer.data[0].uuid,\r\n    assets: BuildingAssetsReducer.data,\r\n    DevicesCount: AssetDevicesCountReducer.data.length,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  fetchBuildingAssets,\r\n  fetchAllBuildings,\r\n  setAssetDetail,\r\n  fetchAssetDevicesCount\r\n\r\n})(Home);\r\n"]},"metadata":{},"sourceType":"module"}