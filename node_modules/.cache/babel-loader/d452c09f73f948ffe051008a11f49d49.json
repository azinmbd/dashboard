{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\dashboard redux\\\\dashboard\\\\src\\\\Pages\\\\Home.jsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport L from \"leaflet\";\nimport { fetchAllBuildings, fetchBuildingAssets, fetchAssetDevicesCount, setAssetDetail } from \"../store/actions\";\nimport filter from \"../asset/img/filter.svg\";\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\";\nimport persianJs from \"persianjs\";\nimport { Link } from \"react-router-dom\";\nimport low from \"../asset/img/low.svg\";\nimport high from \"../asset/img/high.svg\";\nimport building from \"../asset/img/building.svg\";\nvar waterIcon = L.icon({\n  iconUrl: require(\"../asset/img/water.svg\"),\n  iconRetinaUrl: require(\"../asset/img/water.svg\"),\n  iconSize: [60, 70],\n  iconAnchor: [12.3, 41],\n  popupAnchor: [11, -28]\n});\nvar gasIcon = L.icon({\n  iconUrl: require(\"../asset/img/gas.svg\"),\n  iconRetinaUrl: require(\"../asset/img/gas.svg\"),\n  iconSize: [60, 70],\n  iconAnchor: [12.3, 41],\n  popupAnchor: [11, -28]\n});\nvar electricityICon = L.icon({\n  iconUrl: require(\"../asset/img/elec.svg\"),\n  iconRetinaUrl: require(\"../asset/img/elec.svg\"),\n  iconSize: [60, 70],\n  iconAnchor: [12.3, 41],\n  popupAnchor: [11, -28]\n});\n\nconst Home = () => {\n  const [mapView, setMapView] = useState({\n    lng: 53.982,\n    lat: 26.5425,\n    zoom: 13\n  });\n  const [type, setType] = useState(\"electricity\");\n  const dispatch = useDispatch();\n  console.log(dispathc);\n  useEffect(() => {\n    dispatch(fetchAllBuildings());\n    dispatch(fetchBuildingAssets(uuid.data));\n    dispatch(fetchAssetDevicesCount(type));\n  }, []);\n  const uuid = useSelector(state => state.AllBuildingsReducer);\n  const assets = useSelector(state => state.BuildingAssetsReducer.data);\n\n  const getIcon = type => {\n    if (type === \"electricity\") {\n      return electricityICon;\n    }\n\n    if (type === \"water\") {\n      return waterIcon;\n    }\n\n    if (type === \"gas\") {\n      return gasIcon;\n    }\n  };\n\n  const persionConvertor = devicesCount => {\n    const persian = persianJs(`${devicesCount}`).englishNumber()._str;\n\n    return persian;\n  };\n\n  const renderMarker = () => {\n    if (assets) {\n      return assets.map((item, index) => {\n        const position = [item.latitude, item.longitude];\n        return /*#__PURE__*/React.createElement(Marker, {\n          position: position,\n          icon: getIcon(type),\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Popup, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"pop-title\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 17\n          }\n        }, item.name), /*#__PURE__*/React.createElement(\"img\", {\n          src: building,\n          width: \"30px\",\n          alt: \"\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 17\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"info-pop\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex justify-content-between\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"info-name\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 19\n          }\n        }, \"\\u0646\\u0627\\u0645 \\u0645\\u0627\\u0644\\u06A9:\"), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"info-num\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 19\n          }\n        }, item.name)), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex justify-content-between\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"info-name\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 19\n          }\n        }, \"\\u0646\\u0648\\u0639 \\u06A9\\u0646\\u062A\\u0648\\u0631:\"), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"info-num\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 19\n          }\n        }, getType())), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex justify-content-between\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"info-name\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 19\n          }\n        }, \"\\u062A\\u0639\\u062F\\u0627\\u062F \\u06A9\\u0646\\u062A\\u0648\\u0631:\"), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"info-num\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 19\n          }\n        }, persionConvertor(assets.length))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-flex justify-content-between\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"info-name\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 19\n          }\n        }, \"\\u0633\\u06CC\\u06AF\\u0646\\u0627\\u0644:\"), /*#__PURE__*/React.createElement(\"img\", {\n          alt: \"\",\n          className: \"info-num\",\n          width: \"20px\",\n          src: type === \"water\" ? low : high,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 19\n          }\n        })), /*#__PURE__*/React.createElement(Link, {\n          onClick: () => setDetail(item),\n          className: \"btn pop-btn\",\n          to: `/home/${item.name}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 17\n          }\n        }, \"\\u0644\\u06CC\\u0633\\u062A \\u06A9\\u0646\\u062A\\u0648\\u0631 \\u0647\\u0627\"))));\n      });\n    }\n  };\n\n  const getType = () => {\n    if (type === \"electricity\") {\n      return \"برق\";\n    }\n\n    if (type === \"water\") {\n      return \"آب\";\n    }\n\n    if (type === \"gas\") {\n      return \"گاز\";\n    }\n  };\n\n  const setDetail = item => {\n    dispatch(setAssetDetail({\n      assetId: item.uuid,\n      type: type\n    }));\n  };\n\n  const onChangeValue = event => {\n    setType(event.target.value);\n    dispatch(fetchAssetDevicesCount(event.target.value));\n  };\n\n  const position = [mapView.lat, mapView.lng];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-width p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"selector\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: filter,\n    alt: \"\",\n    width: \"20px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, \"\\u0641\\u06CC\\u0644\\u062A\\u0631 \\u0647\\u0627\")), /*#__PURE__*/React.createElement(\"div\", {\n    onChange: event => onChangeValue(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"radio-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"mr-2\",\n    type: \"radio\",\n    value: \"electricity\",\n    name: \"type\",\n    defaultChecked: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }), \"\\u06A9\\u0646\\u062A\\u0648\\u0631 \\u0628\\u0631\\u0642\"), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"radio-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"mr-2\",\n    type: \"radio\",\n    value: \"water\",\n    name: \"type\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }), \"\\u06A9\\u0646\\u062A\\u0648\\u0631 \\u0622\\u0628\"), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"radio-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"mr-2\",\n    type: \"radio\",\n    value: \"gas\",\n    name: \"type\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }), \"\\u06A9\\u0646\\u062A\\u0648\\u0631 \\u06AF\\u0627\\u0632\"))), /*#__PURE__*/React.createElement(Map, {\n    center: position,\n    zoom: mapView.zoom,\n    className: \"h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TileLayer, {\n    attribution: \"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  }), renderMarker()));\n};\n\nexport default Home;","map":{"version":3,"sources":["C:/Users/HP/Desktop/dashboard redux/dashboard/src/Pages/Home.jsx"],"names":["React","useEffect","useState","useSelector","useDispatch","L","fetchAllBuildings","fetchBuildingAssets","fetchAssetDevicesCount","setAssetDetail","Map","TileLayer","Marker","Popup","persianJs","Link","waterIcon","icon","iconUrl","require","iconRetinaUrl","iconSize","iconAnchor","popupAnchor","gasIcon","electricityICon","Home","mapView","setMapView","lng","lat","zoom","type","setType","dispatch","console","log","dispathc","uuid","data","state","AllBuildingsReducer","assets","BuildingAssetsReducer","getIcon","persionConvertor","devicesCount","persian","englishNumber","_str","renderMarker","map","item","index","position","latitude","longitude","name","building","getType","length","low","high","setDetail","assetId","onChangeValue","event","target","value","filter"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport L from \"leaflet\";\r\n\r\nimport {\r\n  fetchAllBuildings,\r\n  fetchBuildingAssets,\r\n  fetchAssetDevicesCount,\r\n  setAssetDetail,\r\n} from \"../store/actions\";\r\nimport filter from \"../asset/img/filter.svg\";\r\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\";\r\nimport persianJs from \"persianjs\";\r\nimport { Link } from \"react-router-dom\";\r\nimport low from \"../asset/img/low.svg\";\r\nimport high from \"../asset/img/high.svg\";\r\nimport building from \"../asset/img/building.svg\";\r\n\r\nvar waterIcon = L.icon({\r\n  iconUrl: require(\"../asset/img/water.svg\"),\r\n  iconRetinaUrl: require(\"../asset/img/water.svg\"),\r\n  iconSize: [60, 70],\r\n  iconAnchor: [12.3, 41],\r\n  popupAnchor: [11, -28],\r\n});\r\nvar gasIcon = L.icon({\r\n  iconUrl: require(\"../asset/img/gas.svg\"),\r\n  iconRetinaUrl: require(\"../asset/img/gas.svg\"),\r\n  iconSize: [60, 70],\r\n  iconAnchor: [12.3, 41],\r\n  popupAnchor: [11, -28],\r\n});\r\nvar electricityICon = L.icon({\r\n  iconUrl: require(\"../asset/img/elec.svg\"),\r\n  iconRetinaUrl: require(\"../asset/img/elec.svg\"),\r\n  iconSize: [60, 70],\r\n  iconAnchor: [12.3, 41],\r\n  popupAnchor: [11, -28],\r\n});\r\n\r\nconst Home = () => {\r\n  const [mapView, setMapView] = useState({\r\n    lng: 53.982,\r\n    lat: 26.5425,\r\n    zoom: 13,\r\n  });\r\n  const [type, setType] = useState(\"electricity\");\r\n\r\n  const dispatch = useDispatch();\r\n  console.log(dispathc\r\n    );\r\n  useEffect(() => {\r\n    dispatch(fetchAllBuildings());\r\n    dispatch(fetchBuildingAssets(uuid.data));\r\n    dispatch(fetchAssetDevicesCount(type));\r\n  }, []);\r\n\r\n  const uuid = useSelector((state) => state.AllBuildingsReducer);\r\n  const assets = useSelector((state) => state.BuildingAssetsReducer.data);\r\n  const getIcon = (type) => {\r\n    if (type === \"electricity\") {\r\n      return electricityICon;\r\n    }\r\n    if (type === \"water\") {\r\n      return waterIcon;\r\n    }\r\n    if (type === \"gas\") {\r\n      return gasIcon;\r\n    }\r\n  };\r\n  const persionConvertor = (devicesCount) => {\r\n    const persian = persianJs(`${devicesCount}`).englishNumber()._str;\r\n    return persian;\r\n  };\r\n  const renderMarker = () => {\r\n    if (assets) {\r\n      return assets.map((item, index) => {\r\n        const position = [item.latitude, item.longitude];\r\n        return (\r\n          <Marker position={position} icon={getIcon(type)} key={index}>\r\n            <Popup>\r\n              <div className=\"pop-title\">\r\n                <span>{item.name}</span>\r\n                <img src={building} width=\"30px\" alt=\"\" />\r\n              </div>\r\n\r\n              <div className=\"info-pop\">\r\n                <div className=\"d-flex justify-content-between\">\r\n                  <span className=\"info-name\">نام مالک:</span>\r\n                  <span className=\"info-num\">{item.name}</span>\r\n                </div>\r\n                <div className=\"d-flex justify-content-between\">\r\n                  <span className=\"info-name\">نوع کنتور:</span>\r\n                  <span className=\"info-num\">{getType()}</span>\r\n                </div>\r\n                <div className=\"d-flex justify-content-between\">\r\n                  <span className=\"info-name\">تعداد کنتور:</span>\r\n                  <span className=\"info-num\">\r\n                    {persionConvertor(assets.length)}\r\n                  </span>\r\n                </div>\r\n\r\n                <div className=\"d-flex justify-content-between\">\r\n                  <span className=\"info-name\">سیگنال:</span>\r\n                  <img\r\n                    alt=\"\"\r\n                    className=\"info-num\"\r\n                    width=\"20px\"\r\n                    src={type === \"water\" ? low : high}\r\n                  />\r\n                </div>\r\n\r\n                <Link\r\n                  onClick={() => setDetail(item)}\r\n                  className=\"btn pop-btn\"\r\n                  to={`/home/${item.name}`}\r\n                >\r\n                  لیست کنتور ها\r\n                </Link>\r\n              </div>\r\n            </Popup>\r\n          </Marker>\r\n        );\r\n      });\r\n    }\r\n  };\r\n  const getType = () => {\r\n    if (type === \"electricity\") {\r\n      return \"برق\";\r\n    }\r\n    if (type === \"water\") {\r\n      return \"آب\";\r\n    }\r\n    if (type === \"gas\") {\r\n      return \"گاز\";\r\n    }\r\n  };\r\n  const setDetail = (item) => {\r\n    dispatch(\r\n      setAssetDetail({\r\n        assetId: item.uuid,\r\n        type: type,\r\n      })\r\n    );\r\n  };\r\n  const onChangeValue = (event) => {\r\n    setType(event.target.value);\r\n    dispatch(fetchAssetDevicesCount(event.target.value));\r\n  };\r\n\r\n  const position = [mapView.lat, mapView.lng];\r\n  return (\r\n    <div className=\"content-width p-0\">\r\n      <div className=\"selector\">\r\n        <div className=\"title\">\r\n          <img src={filter} alt=\"\" width=\"20px\" />\r\n          <span>فیلتر ها</span>\r\n        </div>\r\n        <div onChange={(event) => onChangeValue(event)}>\r\n          <label className=\"radio-box\">\r\n            <input\r\n              className=\"mr-2\"\r\n              type=\"radio\"\r\n              value=\"electricity\"\r\n              name=\"type\"\r\n              defaultChecked\r\n            />\r\n            کنتور برق\r\n          </label>\r\n          <label className=\"radio-box\">\r\n            <input className=\"mr-2\" type=\"radio\" value=\"water\" name=\"type\" />\r\n            کنتور آب\r\n          </label>\r\n          <label className=\"radio-box\">\r\n            <input className=\"mr-2\" type=\"radio\" value=\"gas\" name=\"type\" />\r\n            کنتور گاز\r\n          </label>\r\n        </div>\r\n      </div>\r\n      <Map center={position} zoom={mapView.zoom} className=\"h-100\">\r\n        <TileLayer\r\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n        {renderMarker()}\r\n      </Map>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}